<nav>
  <div><%= link_to "View Drivers", drivers_path%></div>
</nav>
<h1>Driver's Detail</h1>
<p> <%= link_to "Edit Driver", edit_driver_path %></p>
<p> <%= link_to "Delete Driver", driver_path(@driver.id) ,method: :delete, data: { confirm: "Are you sure you want to delete this driver?"} %></p>

<% if @driver.available %>
  <p> <%= link_to "Mark Unavailable", change_availability_path(@driver.id), method: :patch %></p>
<% else %>
  <p> <%= link_to "Mark Available", change_availability_path(@driver.id), method: :patch %></p>
<% end %>

<section>
<ul>
  <li>Driver's ID: <%= @driver[:id]%></li>
  <li>Name: <%= @driver[:name]%></li>
  <li>VIN: <%= @driver[:vin]%></li>
  <li>Status: <%= @driver[:available] ? "Available" : "Unavailable" %></li>
  <li>Average Rating: <%= @driver.average_rating %></li>
  <li>Total Earning: <%= @driver.total_earning %></li> 
</ul> 
</section>

<table class="table">
  <tr>
    <th scope="col">Trip ID</th>
    <th scope="col">Trip Date</th>
    <th scope="col">Passenger Name</th>
    <th scope="col">Driver Name</th>
    <th scope="col">Rating</th>
    <th scope="col">Cost</th>
  </tr>


    <% @driver.trips.each do |trip|  %>

      <%if trip.driver.nil? || trip.passenger.nil? %>

      <%else  %>
      <tr>
        <td scope="row"> <%= trip.id %></td>
        <td> <%= trip.date.strftime("%Y-%m-%d") %></td>
        <td> <%= link_to trip.passenger.name, passenger_path(trip.passenger.id) %></td>
        <td> <%= link_to @driver.name, driver_path(@driver.id) %></td>
        <td> <%= trip.rating %></td>
        <td> $<%= '%.2f' % trip.cost %></td>
      </tr>
    <% end  %>
  <%end  %>
  
</table>

